<ion-header>
  <ion-toolbar color="primary">
   <ion-buttons slot="start">
      <ion-button routerLink="/history-list" ><ion-icon name="arrow-back"></ion-icon></ion-button>
    </ion-buttons>
    <ion-title>Consulta de {{historial.fecha_consulta}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
    <ion-card>
      <ion-item>
        <ion-label class="ion-text-wrap">Con resultado de {{historial.nombre_pad}}</ion-label>
        <ion-icon name="help-circle" slot="end" (click)="alertServ.infoAlert(historial.descripcion)"></ion-icon>
    </ion-item>
    <ion-item *ngIf="historial.comentario!=null && historial.comentario!=''">
      <ion-label>Comentario</ion-label>
      <ion-item>{{historial.comentario}}</ion-item>
  </ion-item>
      <div>
        <img [src]="url">
      </div>
    <ion-card-content>

      <div *ngIf="niveles==''">
      <ion-list>
        <ion-label>Con los síntomas:</ion-label>
        <ion-item *ngFor="let sintoma of sintomas">
          <ion-label>{{sintoma}}</ion-label>
        </ion-item>
      </ion-list>
    </div>
      <div *ngIf="niveles!=''">
        <div *ngIf="niveles.Medio.length>0">
        <ion-item color="medium">Síntomas destacados  <ion-icon name="help-circle" slot="end" (click)="showInfo('medio')"></ion-icon></ion-item>
        <ion-list inset=true>
            <ion-item *ngFor="let niv of niveles.Medio" text-wrap>
                <ion-label *ngIf="niv.reason=='' || niv.reason==undefined" class="ion-text-wrap">{{niv.sintoma}}</ion-label>
                <ion-label *ngIf="niv.reason!='' && niv.reason!=undefined" class="ion-text-wrap">{{niv.sintoma}} - {{niv.reason}}</ion-label>
                <ion-icon name="help-circle" slot="end" (click)="alertServ.infoAlert(niv.descripcion)"></ion-icon>
            </ion-item>
        </ion-list>
      </div>
      <div *ngIf="niveles.Ninguno.length>0">
        <ion-item color="medium">Síntomas sin urgencia  <ion-icon name="help-circle" slot="end" (click)="showInfo('ninguno')"></ion-icon></ion-item>
        <ion-list inset=true>
            <ion-item *ngFor="let niv of niveles.Ninguno" text-wrap>
                <ion-label *ngIf="niv.reason=='' || niv.reason==undefined" class="ion-text-wrap">{{niv.sintoma}}</ion-label>
                <ion-label *ngIf="niv.reason!='' && niv.reason!=undefined" class="ion-text-wrap">{{niv.sintoma}} - {{niv.reason}}</ion-label>
                <ion-icon name="help-circle" slot="end" (click)="alertServ.infoAlert(niv.descripcion)"></ion-icon>
            </ion-item>
        </ion-list>
      </div>
      <div *ngIf="niveles.Bajo.length>0">
        <ion-item color="medium">Síntomas de baja urgencia <ion-icon name="help-circle" slot="end" (click)="showInfo('bajo')"></ion-icon></ion-item>
        <ion-list inset=true>
                <ion-item *ngFor="let niv of niveles.Bajo" text-wrap>
                    <ion-label *ngIf="niv.reason=='' || niv.reason==undefined" class="ion-text-wrap">{{niv.sintoma}}</ion-label>
                    <ion-label *ngIf="niv.reason!='' && niv.reason!=undefined" class="ion-text-wrap">{{niv.sintoma}} - {{niv.reason}}</ion-label>
                    <ion-icon name="help-circle" slot="end" (click)="alertServ.infoAlert(niv.descripcion)"></ion-icon>
                </ion-item>
        </ion-list>
      </div>
      <div *ngIf="niveles.Alto.length>0">
        <ion-item color="medium">Síntomas de alta urgencia <ion-icon name="help-circle" slot="end" (click)="showInfo('alto')"></ion-icon></ion-item>
        <ion-list inset=true>
            <ion-item *ngFor="let niv of niveles.Alto" text-wrap>
                <ion-label *ngIf="niv.reason=='' || niv.reason==undefined" class="ion-text-wrap">{{niv.sintoma}}</ion-label>
                <ion-label *ngIf="niv.reason!='' && niv.reason!=undefined" class="ion-text-wrap">{{niv.sintoma}} - {{niv.reason}}</ion-label>
                <ion-icon name="help-circle" slot="end" (click)="alertServ.infoAlert(niv.descripcion)"></ion-icon>
            </ion-item>
        </ion-list>
      </div>
      <div *ngIf="niveles.Severo.length>0">
        <ion-item color="medium">Síntomas de severidad <ion-icon name="help-circle" slot="end" (click)="showInfo('severo')"></ion-icon></ion-item>
        <ion-list inset=true>
            <ion-item *ngFor="let niv of niveles.Severo" text-wrap>
                <ion-label *ngIf="niv.reason=='' || niv.reason==undefined" class="ion-text-wrap">{{niv.sintoma}}</ion-label>
                <ion-label *ngIf="niv.reason!='' && niv.reason!=undefined" class="ion-text-wrap">{{niv.sintoma}} - {{niv.reason}}</ion-label>
                <ion-icon name="help-circle" slot="end" (click)="alertServ.infoAlert(niv.descripcion)"></ion-icon>
            </ion-item>
        </ion-list>
      </div>
        </div>
        <div *ngIf="recomendaciones!='' && hasOneSelected==false">
          <ion-label color="primary">Especialista consultado</ion-label>
          <br>
          <ion-label>En caso de ya haber asistido con un médico favor de elegir el especialista que le haya ayudado con su {{historial.nombre_pad}}</ion-label>
          <ion-select placeholder="Seleccione una Especialidad" [(ngModel)] = "seleccionado" class="form-control">
            <ion-select-option *ngFor="let recomendacion of recomendaciones" [value]="recomendacion.espe">{{recomendacion.espe}}</ion-select-option>
          </ion-select>
    
          <ion-button type="button" *ngIf="seleccionado!='' || hasOneSelected==false" class="secondary" (click)="actualizar()">Guardar</ion-button>
        </div> 
        <div *ngIf="hasOneSelected==true">
          <ion-label class="title">Especialista consultado</ion-label>
          <ion-input type="text"  value="{{seleccionado}}" disabled ></ion-input>
        </div> 
    </ion-card-content>
  </ion-card>
</ion-content>
